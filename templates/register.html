{% extends "base.html" %}
{% block title %}Register - FitFusion{% endblock %}
{% block content %}
<div class="flex items-center justify-center px-4 h-screen">
  <div class="w-full max-w-md fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2">
    <div class="text-center mb-10">
      <p class="text-base text-black mb-1">Hey there,</p>
      <h1 class="text-2xl font-extrabold text-black">Create an Account</h1>
    </div>

    <!-- Flash Messages -->
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, message in messages %}
          <p
            class="px-4 py-2 rounded-xl mb-5 text-center text-sm
            {% if category == 'error' %}bg-red-100 text-red-700{% else %}bg-green-100 text-green-700{% endif %}"
          >
            {{ message }}
          </p>
        {% endfor %}
      {% endif %}
    {% endwith %}

    <form method="POST" action="{{ url_for('register') }}" class="w-full space-y-5">
      <!-- Email Field -->
      <label class="relative block">
        <span class="sr-only">Email</span>
        <span class="absolute inset-y-0 left-4 flex items-center text-gray-400">
          <i class="fas fa-envelope"></i>
        </span>
        <input
          type="email"
          name="email"
          id="email"
          placeholder="Email"
          required
          class="w-full rounded-xl bg-gray-100 placeholder-gray-400 pl-12 pr-4 py-3 text-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-400"
        />
      </label>

      <!-- Password Field -->
      <label class="relative block">
        <span class="sr-only">Password</span>
        <span class="absolute inset-y-0 left-4 flex items-center text-gray-400">
          <i class="fas fa-lock"></i>
        </span>
        <input
          id="password"
          name="password"
          type="password"
          placeholder="Password"
          required
          class="w-full rounded-xl bg-gray-100 placeholder-gray-400 pl-12 pr-12 py-3 text-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-400"
        />
        <span class="absolute inset-y-0 right-4 flex items-center text-gray-400 cursor-pointer" onclick="togglePassword('password', this)">
          <i class="fas fa-eye-slash"></i>
        </span>
      </label>

      <!-- Confirm Password Field -->
      <label class="relative block">
        <span class="sr-only">Confirm Password</span>
        <span class="absolute inset-y-0 left-4 flex items-center text-gray-400">
          <i class="fas fa-lock"></i>
        </span>
        <input
          id="confirmPassword"
          name="confirmPassword"
          type="password"
          placeholder="Confirm Password"
          required
          class="w-full rounded-xl bg-gray-100 placeholder-gray-400 pl-12 pr-12 py-3 text-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-400"
        />
        <span class="absolute inset-y-0 right-4 flex items-center text-gray-400 cursor-pointer" onclick="togglePassword('confirmPassword', this)">
          <i class="fas fa-eye-slash"></i>
        </span>
      </label>

      <!-- Register Button -->
      <button
        type="submit"
        class="w-full py-3 text-sm rounded-full font-bold text-white bg-gradient-to-r from-blue-400 to-indigo-400 shadow-[0_5px_15px_rgba(96,144,255,0.3)]"
      >
        Register
      </button>
    </form>

    <p class="mt-12 text-center text-black text-sm">
      Already have an account?
      <a href="{{ url_for('login') }}" class="text-purple-500 font-semibold">Login</a>
    </p>
  </div>

  <!-- Password Toggle Script -->
  <script>
    function togglePassword(fieldId, iconElement) {
      const field = document.getElementById(fieldId);
      const icon = iconElement.querySelector("i");

      if (field.type === "password") {
        field.type = "text";
        icon.classList.remove("fa-eye-slash");
        icon.classList.add("fa-eye");
      } else {
        field.type = "password";
        icon.classList.remove("fa-eye");
        icon.classList.add("fa-eye-slash");
      }
    }
  </script>
</div>

<!-- External Styles and Scripts -->
<script src="https://cdn.tailwindcss.com"></script>
<link
  href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap"
  rel="stylesheet"
/>
<link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
/>
<style>
  body {
    font-family: "Poppins", sans-serif;
  }
</style>
{% endblock %}